<?xml version="1.0" encoding="utf-8"?>
<PMode 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
  xmlns="eu:edelivery:as4:pmode">
  <Id>03-sample-pmode</Id>
  <AllowOverride>false</AllowOverride>
  <Mep>OneWay</Mep>
  <MepBinding>Push</MepBinding>
  <PushConfiguration>
    <Protocol>
      <Url>http://localhost:9090/msh</Url>
      <UseChunking>false</UseChunking>
      <UseHttpCompression>false</UseHttpCompression>
    </Protocol>
    <TlsConfiguration>
      <IsEnabled>false</IsEnabled>
      <TlsVersion>Tls12</TlsVersion>
      <ClientCertificateReference/>
    </TlsConfiguration>
  </PushConfiguration>
  <PullConfiguration>
    <SubChannel />
  </PullConfiguration>
  <Reliability>
    <ReceptionAwareness>
      <IsEnabled>true</IsEnabled>
      <RetryCount>5</RetryCount>
      <RetryInterval>00:00:05</RetryInterval>
    </ReceptionAwareness>
  </Reliability>
  <ReceiptHandling>
    <NotifyMessageProducer>true</NotifyMessageProducer>
    <NotifyMethod>
      <Type>FILE</Type>
      <Parameters>
        <Parameter name="location" value=".\messages\receipts\" />
      </Parameters>
    </NotifyMethod>
  </ReceiptHandling>
  <ErrorHandling>
    <NotifyMessageProducer>true</NotifyMessageProducer>
    <NotifyMethod>
      <Type>FILE</Type>
      <Parameters>
        <Parameter name="location" value=".\messages\errors\" />
      </Parameters>
    </NotifyMethod>
  </ErrorHandling>
  <ExceptionHandling>
    <NotifyMessageProducer>true</NotifyMessageProducer>
    <NotifyMethod>
      <Type>FILE</Type>
      <Parameters>
        <Parameter name="location" value=".\messages\exceptions\" />
      </Parameters>
    </NotifyMethod>
  </ExceptionHandling>
  <Security>
    <Signing>
      <IsEnabled>true</IsEnabled>
      <KeyReferenceMethod>BSTReference</KeyReferenceMethod>
      <PrivateKeyFindValue>AccessPointA</PrivateKeyFindValue>
      <PrivateKeyFindType>FindBySubjectName</PrivateKeyFindType>
      <Algorithm>http://www.w3.org/2001/04/xmldsig-more#rsa-sha256</Algorithm>
      <HashFunction>http://www.w3.org/2001/04/xmlenc#sha256</HashFunction>
    </Signing>
    <Encryption>
      <IsEnabled>true</IsEnabled>
      <Algorithm>http://www.w3.org/2009/xmlenc11#aes128-gcm</Algorithm>
      <PublicKeyFindValue>AccessPointA</PublicKeyFindValue>
      <PublicKeyFindType>FindBySubjectName</PublicKeyFindType>
    </Encryption>
  </Security>
  <MessagePackaging>
    <UseAS4Compression>true</UseAS4Compression>
    <IsMultiHop>false</IsMultiHop>
    <IncludePModeId>true</IncludePModeId>
    <CollaborationInfo>
    <AgreementReference>
        <Value>http://agreements.europa.org/agreement</Value>
      </AgreementReference>
      <ConversationId>eu:edelivery:as4:sampleconversation</ConversationId>
      <Action>eu:sample:03</Action>
      <Service>
        <Value>getting:started</Value>
        <Type>org:europa:services</Type>
      </Service>
    </CollaborationInfo>
    <PartyInfo>
      <FromParty>
        <PartyIds>
          <PartyId>
            <Id>org:eu:europa:as4:example:accesspoint:A</Id>
          </PartyId>
        </PartyIds>
        <Role>Sender</Role>
      </FromParty>
      <ToParty>
        <PartyIds>
          <PartyId>
            <Id>org:eu:europa:as4:example:accesspoint:B</Id>
          </PartyId>
        </PartyIds>
        <Role>Receiver</Role>
      </ToParty>
    </PartyInfo>
  </MessagePackaging>
</PMode>